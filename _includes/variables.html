<!-- Check if variables need to be updated -->
{% if architecture == nil or architecture.size == 0 %}
<!-- Site-wide variables -->
  {% if page.lang == nil or page.lang == "en" %}
<!-- Page language -->
    {% assign lang = "" %}
<!-- Includes -->
    {% assign includes = site.data.includes %}
<!-- Architecture -->
    {% assign architecture = site.data.architecture %}
<!-- Doc index -->
    {% assign doc-index-4.0 = site.data.doc-index-4.0 %}
    {% assign doc-index-4.1 = site.data.doc-index-4.1 %}
<!-- All docs link -->
    {% assign all_docs = site.doc  %}
<!-- Downloads page -->
    {% assign downloads-page = site.data.downloads-page %}
<!-- HCL -->
    {% assign hcl = site.data.hcl %}
<!-- Experts -->
    {% assign experts = site.data.experts %}
<!-- Team page -->
    {% assign team-page = site.data.team-page %}
<!-- Style guide page -->
    {% assign visual-style-guide-page = site.data.visual-style-guide-page %}
  {% else %}
<!-- Page language -->
    {% assign lang = "/" | append: page.lang %}
<!-- Includes -->
    {% assign includes = site.data.translation[page.lang].includes %}
    {% if includes == nil or includes.size == 0 %}
      {% assign includes = site.data.includes %}
    {% endif %}
<!-- Architecture -->
    {% assign architecture = site.data.translation[page.lang].architecture %}
    {% if architecture == nil or architecture.size == 0 %}
      {% assign architecture = site.data.architecture %}
    {% endif %}
<!-- Doc index -->
    {% assign doc-index-4.0 = site.data.translation[page.lang].doc-index-4.0 %}
    {% if doc-index-4.0 == nil or doc-index-4.0.size == 0 %}
      {% assign doc-index-4.0 = site.data.doc-index-4.0 %}
    {% endif %}
    {% assign doc-index-4.1 = site.data.translation[page.lang].doc-index-4.1 %}
    {% if doc-index-4.1 == nil or doc-index-4.1.size == 0 %}
      {% assign doc-index-4.1 = site.data.doc-index-4.1 %}
    {% endif %}
<!-- All docs link -->
    {% assign all_docs = site.translated %}
<!-- Downloads page -->
    {% assign downloads-page = site.data.translation[page.lang].downloads-page %}
    {% if downloads-page == nil or downloads-page.size == 0 %}
      {% assign downloads-page = site.data.downloads-page %}
    {% endif %}
<!-- HCL -->
    {% assign hcl = site.data.translation[page.lang].hcl %}
    {% if hcl == nil or hcl.size == 0 %}
      {% assign hcl = site.data.hcl %}
    {% endif %}
<!-- Experts -->
    {% assign experts = site.data.translation[page.lang].experts %}
    {% if experts == nil or experts.size == 0 %}
      {% assign experts = site.data.experts %}
    {% endif %}
<!-- Team page -->
    {% assign team-page = site.data.translation[page.lang].team-page %}
    {% if team-page == nil or team-page.size == 0 %}
      {% assign team-page = site.data.team-page %}
    {% endif %}
<!-- Style guide page -->
    {% assign visual-style-guide-page = site.data.translation[page.lang].visual-style-guide-page %}
    {% if visual-style-guide-page == nil or visual-style-guide-page.size == 0 %}
      {% assign visual-style-guide-page = site.data.visual-style-guide-page %}
    {% endif %}
  {% endif %}
<!-- Doc link -->
  {% assign doc_link = lang | append: "/doc/" %}
  {% assign doc_link_4.0 = lang | append: "/doc/4.0/" %}
  {% assign doc_link_4.1 = lang | append: "/doc/4.1/" %}
<!-- Team link -->
  {% assign team_link = lang | append: "/team/" %}
<!-- News by category link -->
  {% assign news_categories_link = lang | append: "/news/categories/" %}
  {% assign news_count = site.posts | where:'permalink', news_categories_link %}
  {% if news_count.size == 0 %}
    {% assign news_categories_link =  "/news/categories/" %}
  {% endif %}
<!-- Path segments -->
  {% assign path_segments = page.relative_path | split: '/' %}
{% endif %}
